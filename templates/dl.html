<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DL 專案互動教學頁</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='css/DL_html.css') }}">
</head>
<body>

<div class="container-fluid py-3">
  <a href="/" class="btn btn-secondary mb-3">← 回首頁</a>
  <h2>DL 專案互動式程式碼教學（可縮放專案列表）</h2>

  <div class="main-container">
    <!-- 側邊欄 -->
    <div class="sidebar" id="sidebar">
      <button class="icon-btn btn btn-outline-primary" id="toggleBtn">☰</button>

      <!-- 專案按鈕 -->
      <button class="project-btn btn btn-outline-primary" data-id="1">專案 1</button>
      <button class="project-btn btn btn-outline-primary" data-id="2">專案 2</button>
      <button class="project-btn btn btn-outline-primary" data-id="3">專案 3</button>
      <button class="project-btn btn btn-outline-primary" data-id="4">專案 4</button>
      <button class="project-btn btn btn-outline-primary" data-id="5">專案 5</button>
      <button class="project-btn btn btn-outline-primary" data-id="6">專案 6</button>
      <button class="project-btn btn btn-outline-primary" data-id="7">專案 7</button>
      <button class="project-btn btn btn-outline-primary" data-id="8">專案 8</button>
      <button class="project-btn btn btn-outline-primary" data-id="9">專案 9</button>
      <button class="project-btn btn btn-outline-primary" data-id="10">專案 10</button>
    </div>

    <!-- 程式碼區 -->
    <div class="code-container">
      <div class="left-panel" id="description">
        <h4>程式碼說明</h4>
        <p>滑鼠移到程式碼行以查看說明</p>
      </div>
      <div class="right-panel" id="codeArea">
        <pre id="codeContent"></pre>
      </div>
    </div>
  </div>
</div>

<script type="module">
  // DL 專用 loader
  import { DL_projects as projects } from "/static/js/DL_project_loader.js";


  let currentProject = 1;

  function renderProject(id){
    const codeArea = document.getElementById("codeContent");
    const desc = document.getElementById("description");

    codeArea.innerHTML = "";
    desc.innerHTML = "<h4>程式碼說明</h4><p>滑鼠移到程式碼行以查看說明</p>";

    const lines = projects[id]?.code || [];

    lines.forEach((lineObj)=>{
      const span = document.createElement("span");
      span.className="code-line";
      span.dataset.desc = lineObj.desc;
      span.textContent = lineObj.line;

      span.addEventListener("mouseover",()=>{
        desc.innerHTML="<h4>程式碼說明</h4><p>"+lineObj.desc+"</p>";
      });
      span.addEventListener("mouseout",()=>{
        desc.innerHTML="<h4>程式碼說明</h4><p>滑鼠移到程式碼行以查看說明</p>";
      });

      codeArea.appendChild(span);
      codeArea.appendChild(document.createElement("br"));
    });
  }

  renderProject(currentProject);

  // 專案按鈕
  document.querySelectorAll(".project-btn").forEach(btn=>{
    btn.addEventListener("click",()=>{
      currentProject = btn.dataset.id;
      renderProject(currentProject);
    });
  });

  // 側邊欄收展
  const sidebar = document.getElementById("sidebar");
  document.getElementById("toggleBtn").addEventListener("click",()=>{
    sidebar.classList.toggle("expanded");
  });
</script>

</body>
</html>
